<!-- Edit this file to change the layout of the detail view form -->

<script src="resources/datepicker/js/datepicker.packed.js"></script>
<link href="resources/datepicker/css/datepicker.css" rel="stylesheet">

<a name="detail-view"></a>
<div class="panel-heading"><h3 class="panel-title"><strong><%%DETAIL_VIEW_TITLE%%></strong></h3></div>

<div class="panel-body" id="tblContributors_dv_container">
	<!-- child links -->
	<div class="row">
		<div class="col-xs-12">
			<a class="hidden-xs btn btn-default btn-lg pull-right hidden hspacer-sm" href="tblContributors_view.php?filterer_ParentID=<%%URLVALUE(ID)%%>" id="tblContributors_link"><i class="glyphicon glyphicon-list-alt"></i> tblContributors</a>
			<a class="visible-xs btn btn-default btn-lg btn-block hidden vspacer-sm" href="tblContributors_view.php?filterer_ParentID=<%%URLVALUE(ID)%%>" id="xs_tblContributors_link"><i class="glyphicon glyphicon-list-alt"></i> tblContributors</a>
			<input type="hidden" id="tblContributors_hclink" value="tblContributors_view.php?filterer_ParentID=<%%URLVALUE(ID)%%>">
			<input type="hidden" id="tblAccessions_hclink" value="tblAccessions_view.php?filterer_ContributorID=<%%URLVALUE(ID)%%>">
			<input type="hidden" id="tblUploadLogs_hclink" value="tblUploadLogs_view.php?filterer_ContributorID=<%%URLVALUE(ID)%%>">
			<div class="clearfix"></div>
		</div>
	</div>
	<hr>

	<div class="row">
		<!-- form inputs -->
		<div class="col-md-8 col-lg-10" id="tblContributors_dv_form">
			<fieldset class="form-horizontal">

				<div class="form-group">
					<label for="ID" class="control-label col-lg-3">ID</label>
					<div class="col-lg-9">
						<p class="form-control-static" id="ID"><%%VALUE(ID)%%></p>
					</div>
				</div>

				<div class="form-group">
					<label for="FName" class="control-label col-lg-3">FName</label>
					<div class="col-lg-9">
						<input tabindex="1" maxlength="40" type="text" class="form-control" name="FName" id="FName" value="<%%VALUE(FName)%%>">
					</div>
				</div>

				<div class="form-group">
					<label for="LName" class="control-label col-lg-3">LName</label>
					<div class="col-lg-9">
						<input tabindex="1" maxlength="40" type="text" class="form-control" name="LName" id="LName" value="<%%VALUE(LName)%%>">
					</div>
				</div>

				<div class="form-group">
					<label for="Email" class="control-label col-lg-3">Email</label>
					<div class="col-lg-9">
						
						<p class="form-control-static">
							<a id="Email-link" href="mailto:<%%VALUE(Email)%%>" target="_blank"><i class="glyphicon glyphicon-envelope text-info" title="<%%VALUE(Email)%%>"></i></a>
							<label for="Email"><button type="button" id="Email-edit-link" class="btn btn-default hspacer-lg vspacer-sm" data-toggle="collapse" data-target="#Email" title="<%%TRANSLATION(Edit)%%>"><i class="glyphicon glyphicon-pencil"></i></button></label>
						</p>
						<script>jQuery(function(){ var e_Email = '<%%VALUE(Email)%%>'; if(e_Email == '' || e_Email == '&nbsp;' || e_Email == 'blank.gif') jQuery('#Email-link').hide(); });</script><input tabindex="1" maxlength="80" type="text" class="form-control collapse" name="Email" id="Email" value="<%%VALUE(Email)%%>">
					</div>
				</div>

				<div class="form-group">
					<label for="PW" class="control-label col-lg-3">PW</label>
					<div class="col-lg-9">
						<input tabindex="1" maxlength="40" type="text" class="form-control" name="PW" id="PW" value="<%%VALUE(PW)%%>">
					</div>
				</div>

				<div class="form-group">
					<label for="Organization" class="control-label col-lg-3">Organization</label>
					<div class="col-lg-9">
						<input tabindex="1" maxlength="40" type="text" class="form-control" name="Organization" id="Organization" value="<%%VALUE(Organization)%%>">
					</div>
				</div>

				<div class="form-group">
					<label for="ScopeID" class="control-label col-lg-3">ScopeID</label>
					<div class="col-lg-9">
						<input tabindex="1" maxlength="" type="text" class="form-control" name="ScopeID" id="ScopeID" value="<%%VALUE(ScopeID)%%>">
					</div>
				</div>

				<div class="form-group">
					<label for="ParentID" class="control-label col-lg-3">ParentID <button class="btn btn-info btn-xs vspacer-sm" type="button" data-toggle="collapse" tabindex="-1" data-target="#ParentID-description"><i class="glyphicon glyphicon-info-sign"></i></button></label>
					<div class="col-lg-9">
						<span class="help-block collapse" id="ParentID-description"><div class="alert alert-info">Parent Contributor Admin who granted this contributor access.  Used for sub-contributors, so that Contributors can deputize helpers.<br /></div></span>

						<div class="row"><div class="col-xs-10"><%%COMBO(ParentID)%%></div><div class="col-xs-1"><%%PLINK(ParentID)%%></div></div>
					</div>
				</div>

				<div class="form-group">
					<label for="AdminLevel" class="control-label col-lg-3">AdminLevel</label>
					<div class="col-lg-9">
						<input tabindex="1" maxlength="" type="text" class="form-control" name="AdminLevel" id="AdminLevel" value="<%%VALUE(AdminLevel)%%>">
					</div>
				</div>

				<div class="form-group">
					<label for="CreationDate" class="control-label col-lg-3">CreationDate</label>
					<div class="col-lg-9">
						<%%COMBO(CreationDate)%%>
					</div>
				</div>

				<div class="form-group">
					<label for="ExpirationDate" class="control-label col-lg-3">ExpirationDate</label>
					<div class="col-lg-9">
						<%%COMBO(ExpirationDate)%%>
					</div>
				</div>

				<div class="form-group">
					<label for="LastAccessDate" class="control-label col-lg-3">LastAccessDate</label>
					<div class="col-lg-9">
						<%%COMBO(LastAccessDate)%%>
					</div>
				</div>

				<div class="form-group">
					<div class="col-lg-offset-3 col-lg-9">
						<div class="checkbox"><label for="Online"><input tabindex="1" type="checkbox" name="Online" id="Online" value="1" <%%CHECKED(Online)%%>> Online</label>
						</div>
					</div>
				</div>

			</fieldset>
		</div>

		<!-- DV action buttons -->
		<div class="col-md-4 col-lg-2" id="tblContributors_dv_action_buttons">
			<div class="btn-toolbar">
				<div class="btn-group-vertical btn-group-lg" style="width: 100%;">
					<%%UPDATE_BUTTON%%>
				</div><p></p>
				<div class="btn-group-vertical btn-group-lg" style="width: 100%;">
					<%%DESELECT_BUTTON%%>
					<%%DVPRINT_BUTTON%%>
					<%%DELETE_BUTTON%%>
				</div><p></p>
				<div class="btn-group-vertical btn-group-lg" style="width: 100%;">
					<%%INSERT_BUTTON%%>
				</div>
			</div>
		</div>
	</div>


	<!-- child records -->
	<hr>
	<div class="row">
		<div class="col-lg-10 col-lg-offset-1">
			<div id="tblContributors-children" class="children-tabs"></div>
		</div>
	</div>

</div><!-- /div class="panel-body" -->
	<script>
		jQuery(function(){
			jQuery('select, input[type=text], textarea').not(':disabled').eq(0).focus();
			jQuery('form').eq(0).change(function(){
				if(jQuery(this).data('already_changed')) return;
				if(jQuery('#deselect').length) jQuery('#deselect').removeClass('btn-default').addClass('btn-warning').get(0).lastChild.data = " <%%TRANSLATION(Cancel)%%>";
				jQuery(this).data('already_changed', true);
			});

			jQuery('a[href="<%%TRANSLATION(ImageFolder)%%>"]').click(function(){ return false; });
		});

		document.observe("dom:loaded", function() {
			/* when no record is selected ('add new' mode) */
			if($$('input[name=SelectedID]')[0].value==''){
				/* hide links to children tables */
				$$('.detail_view a[id]').findAll(function(cl){ return cl.id.match(/_link$/); }).invoke('hide');
				/* skip loading parent/children view */
				return false;
			}
			post(
				'parent-children.php', {
					ParentTable: 'tblContributors',
					SelectedID: '<%%VALUE(ID)%%>',
					Operation: 'show-children'
				},
				'tblContributors-children'
			);
		});
	</script>